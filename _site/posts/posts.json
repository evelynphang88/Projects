[
  {
    "path": "posts/2021-04-05-assignment/",
    "title": "Visualisation for Stock Performance Analysis",
    "description": "ISS 608- Visual Analytics Assignment : Stock Analysis - Visualisations- A short exploration of TidyQuant with ggplot2",
    "author": [
      {
        "name": "EvelynPhang",
        "url": {}
      }
    ],
    "date": "2021-04-05",
    "categories": [],
    "contents": "\r\n\r\nContents\r\n1.Background\r\n2. Objective/Layout of this assignment\r\n3. Literature Review - Why TidyQuant (Tidy Quantitative Financial Analysis)\r\n3.1 TidyQuant - Charting\r\n3.2 TidyQuant - Portfolio Analysis\r\n4. Loading and Preping Data : Single Stock and Multiple Stock analysis\r\n5.Testing and Prototyping - Single Stock Analysis ( Using APPLE stock)\r\n5.1 Candlestick Chart\r\n5.2 Stock Price and Trading Volume - Line Charts/Bart Charts\r\n6. Charting for Multiple Securities\r\n6.1 Multiple securities -Closing prices\r\n6.2 Multiple securities -Moving averages for multiple stocks at once\r\n6.3 Multiple securities -BBands for multiple stocks\r\n6.4 Multiple securities -Annural Returns\r\n6.5 Portfolio Analysis using tq_portfolio function.\r\n6.6 Miscelleneous Plotting experiementations\r\n7.0 Reflection- Conclusion/Key Learnings/Benefits of Interactivity in the Shiny App\r\n7.1 Interactive User Experience and Self Configuration of views\r\n7.2 Finer details - Interacing with Chart Points.\r\n8.0 Possible SHiny App Story Board for Stock Analysis\r\n9.0 References\r\n\r\n1.Background\r\nMany investors analyze stocks based on their fundamentals such as their revenue, valuation, or industry trends but fundamental factors aren’t always reflected in the market price.\r\nTechnical analysis using charts help to identify trading signals and price patterns, and provides as a window into market psychology to identify opportunities to profit.\r\nProject Group Scope : provides various tools for a beginner investor,to analyse stocks past performance and forecasting with 3 parts:\r\n1)Forecasting ( leveraging ModelTime package)\r\n2)Visualisations for Stock Performance ( leveraging TidyQuant Package)\r\n3)Extensive Time Series analysis ( leveraging TimeTK)\r\n** I will be covering part 2).**\r\n2. Objective/Layout of this assignment\r\nThis assignment explores the features of TidyQuant to experiment what is best of the user, and also to identify any gaps that an eventually Shiny App implementation can adderss to improve the user’s experience.\r\nAfter some research,the following 3 charts provide the most information for the beginner trader to study a single stock:\r\nPrice Movement - Candlesticks Chart\r\nThis chart reflect the impact of investor sentiment on security prices and are used by technical analysts to determine when to enter and exit trades.\r\n\r\nStock Price and Trading Volume - Line Charts/Bart Charts\r\nThis chart provide the the volumes have been in the past and what they are currently before making a decision.\r\n\r\nMoving averages (15-day, 50-day and 200-day) on a particular stock price movement-\r\nThis chart provides information about the moving average. For Liquid/Volatile stocks may benefit from shorter (eg.15-day) moving average analysis where as illiquid stocks my be examined with 50-day moving average.\r\n\r\nAfter some research, the typical four charts that is useful for a trader to analysis of group of stocks or portfolio :\r\n1)Closing prices\r\n2)Moving Average\r\n3)Bollinger Bands\r\n4)Annual Returns\r\n3. Literature Review - Why TidyQuant (Tidy Quantitative Financial Analysis)\r\n\r\n\r\n\r\n\r\n\r\n# Loads tidyquant, lubridate, xts, quantmod, TTR, and PerformanceAnalytics\r\n\r\npackages <- c('tidyverse','tidyquant','lubridate','xts','quantmod','TTR','PerformanceAnalytics')\r\n\r\nfor (p in packages){\r\n  if (!require(p,character.only=T)){\r\n    install.packages(p)\r\n  }\r\n  library(p, character.only=T)\r\n}\r\n\r\n\r\n\r\nTidyQuant addresses a few gaps that in the existing quantitative analysis functions (QAF).\r\nGAP-1\r\nExisting Quantitative analysis functions (QAF) -such as xts, zoo, quantmod, TTR, and PerformanceAnalytics work with time-series objects. These objects do not work well with the data frames or the tidyverse workflow.\r\n\r\nSOLUTION- 1 +TidyQuant addresses this by providing a wrapper to enabling seamless usage within the tidyverse workflow.\r\nGAP-2: Existing QAF functions for Stock Analysis do not provide any easy to use functions to load stock information and stock indices.\r\nSOLUTION-2 : TidyQuant addresses this by implementing the following functions :Get a Stock Index, tq_index(), or a Stock Exchange, tq_exchange(): Returns the stock symbols and various attributes for every stock in an index or exchange. Eighteen indexes and three exchanges are available. To get Quantitative Data, tq_get()is implemented to provide a one-stop shop to get data from various web-sources.\r\n\r\nGAP-3 : PerformanceAnalytics package consolidates functions to compute many of the most widely used performance metrics.\r\nSOLUTION -3 : Tidyquant integrates this functionality so it can be used at scale using the split, apply, combine framework within the tidyverse. Two primary functions integrate the performance analysis functionality:\r\ntq_performance implements the performance analysis functions in a tidy way, enabling scaling analysis using the split, apply, combine framework\r\ntq_portfolio provides a useful tool set for aggregating a group of individual asset returns into one or many portfolios.\r\n\r\n\r\n3.1 TidyQuant - Charting\r\nThe tidyquant package leverages ggplot2 - and has three primary geometry (geom) categories and one coordinate manipulation (coord) category that i will explore:\r\nChart Types: Two chart type visualizations are available using geom_barchart and geom_candlestick.\r\nMoving Averages: Seven moving average visualizations are available using geom_ma.\r\nBollinger Bands: Bollinger bands can be visualized using geom_bbands. The BBand moving average can be one of the seven available in Moving Averages.\r\nZooming in on Date Ranges:\r\nTwo coord functions are available (coord_x_date and coord_x_datetime), which prevent data loss when zooming in on specific regions of a chart. This is important when using the moving average and Bollinger band geoms.\r\n\r\n3.2 TidyQuant - Portfolio Analysis\r\nThe Performance Analytics package in TidyQuant consolidates functions to compute the most widely used stock performance metrics. Tidquant integrates this functionality so it can be used at scale using the split, apply, combine framework within the tidyverse.\r\nTwo primary functions integrate the performance analysis functionality:\r\ntq_performance - implements the performance analysis functions in a tidy way, enabling scaling analysis using the split, apply, combine framework.\r\ntq_portfolio - provides a useful tool set for aggregating a group of individual asset returns into one or many portfolios.\r\n\r\n4. Loading and Preping Data : Single Stock and Multiple Stock analysis\r\nTidyquant provides a function tq_get for directly loading data. For the purpose of this assignment i use this funciton to get the data for APPLE, AMAZON, FACEBOOK< GOOGLE, NETFLIX. To preapre for a multi-stock analysis evaluation, i also built combined data set.\r\n\r\n\r\nAAPL <- tq_get(\"AAPL\", get = \"stock.prices\", from = \"2011-01-01\", to = \"2021-03-31\")\r\nAMZN <- tq_get(\"AMZN\", get = \"stock.prices\", from = \"2011-01-01\", to = \"2021-03-31\")\r\nGOOG <- tq_get(\"GOOG\",get = \"stock.prices\", from = \"2011-01-01\", to = \"2021-03-31\")\r\nNFLX <- tq_get(\"NFLX\",get = \"stock.prices\", from = \"2011-01-01\", to = \"2021-03-31\")\r\nFB <- tq_get(\"FB\",get = \"stock.prices\", from = \"2011-01-01\", to = \"2021-03-31\")\r\n\r\n\r\n\r\n\r\n\r\nFAANG<- rbind(FB,AAPL,AMZN,NFLX,GOOG)\r\n\r\n\r\n\r\nSetup the End Data for review as last day in March of 2021\r\n\r\n\r\nend <- as_date(\"2021-03-31\")\r\n\r\n\r\n\r\n5.Testing and Prototyping - Single Stock Analysis ( Using APPLE stock)\r\n5.1 Candlestick Chart\r\n5.1.1 Candlestick Chart- Complete Period\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_candlestick(aes(open = open, high = high, low = low, close = close)) +\r\n    labs(title = \"AAPL Candlestick Chart\", y = \"Closing Price\", x = \"\") +\r\n    scale_color_tq(theme = \"dark\") +\r\n    scale_y_continuous(labels = scales::dollar)\r\n\r\n\r\n\r\n\r\nKEY LEARNING : A candlestick chart for a long period eg. more than 5 years is not really meaningful. THe user will need to able to zoom into the prefered periods eg. 6 weeks or less.\r\n5.1.2 Candlestick Chart- Zooming into a 6 week window.\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_candlestick(aes(open = open, high = high, low = low, close = close)) +\r\n    labs(title = \"AAPL Candlestick Chart\", \r\n         subtitle = \"Zoomed in using coord_x_date- 6 weeks\",\r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(end - weeks(6), end),\r\n                 ylim = c(110, 140)) + \r\n    theme_tq() +\r\n    scale_color_tq(theme = \"dark\") +\r\n    scale_y_continuous(labels = scales::dollar)\r\n\r\n\r\n\r\n\r\n5.1.3 Candlestick Chart- Zooming into 1 week\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_candlestick(aes(open = open, high = high, low = low, close = close)) +\r\n    labs(title = \"AAPL Candlestick Chart\", \r\n         subtitle = \"Zoomed in using coord_x_date - 14 days\",\r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(end - weeks(1), end),\r\n                 ylim = c(115, 130)) + \r\n    theme_tq() +\r\n    scale_color_tq(theme = \"dark\") +\r\n    scale_y_continuous(labels = scales::dollar)\r\n\r\n\r\n\r\n\r\n5.1.4 Candlestick Chart- Using different colours for the candlesticks.\r\nThe colors can be modified using colour_up and colour_down, which control the line color, and fill_up and fill_down, which control the rectangle fills.Using RED and GREEN - makes it very clear for the user.. which is the ‘danger’ candlestick.\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_candlestick(aes(open = open, high = high, low = low, close = close),\r\n                        colour_up = \"darkgreen\", colour_down = \"darkred\", \r\n                        fill_up  = \"darkgreen\", fill_down  = \"darkred\") +\r\n    labs(title = \"AAPL Candlestick Chart- 6 weeks \", \r\n         subtitle = \"Zoomed in, Experimenting with Formatting: dark red and dark green gives the best visual\",\r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(end - weeks(6), end),\r\n                 ylim = c(110, 140)) + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\nKEY LEARNING : Red and Green is a good colour palette to immediately show up the days where the closing price was lower then the opening price ( Red )- makes the candle chart quickly readable.\r\n5.2 Stock Price and Trading Volume - Line Charts/Bart Charts\r\n5.2.1 Price Line Chart- for the full period\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_line() +\r\n    labs(title = \"AAPL Line Chart- Prices\", y = \"Closing Price in USD\", x = \"\") +\r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n5.2.2 Price Bar Chart- for the full period\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_barchart(aes(open = open, high = high, low = low, close = close)) +\r\n    labs(title = \"AAPL Bar Chart -Stock Prices\",\r\n         subtitle = \"The bar chart does not give move meaningful info then the line chart for large time scales\",\r\n         y = \"Closing Price in USD\", x = \")+\r\n         \")+\r\n    theme_tq()\r\n\r\n\r\n\r\n\r\nKEY LEARNING : The bar chart does not give move meaningful info then the line chart for large time scales\r\n5.2.3 Price Bar Chart- for 4 weeks - zoomed in\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_barchart(aes(open = open, high = high, low = low, close = close),\r\n                  colour_up = \"darkgreen\", colour_down = \"darkred\", size = 2) +\r\n    labs(title = \"AAPL Bar Chart of Stock Prices\", \r\n         subtitle = \"Zoomed in using coord_x_date- colour_up = darkgreen, colour_down = darkred\",\r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(end - weeks(4), end),\r\n                 ylim = c(110, 130)) + \r\n     theme_tq()\r\n\r\n\r\n\r\n\r\nKey Learning : The colors can be modified using colour_up and colour_down arguments, and parameters such as size can be used to control the appearance\r\n5.2.4 Stock Volume Chart\r\nWe can use the geom_segment() function to chart daily volume, which uses xy points for the beginning and end of the line. Using the aesthetic color argument, we color based on the value of volume to make these data stick out.\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = volume)) +\r\n    geom_segment(aes(xend = date, yend = 0, color = volume)) + \r\n    geom_smooth(method = \"loess\", se = FALSE) +\r\n    labs(title = \"APPLE Volume Chart for the whole period\", \r\n         subtitle = \"Charting Daily Volume\", \r\n         y = \"Volume\", x = \"\") +\r\n    theme_tq() +\r\n    theme(legend.position = \"none\") \r\n\r\n\r\n\r\n\r\n5.2.5 Volume Chart - using Geom_segment- zoomed into past 50 days\r\nAnd, we can zoom in on a specific region. Using scale_color_gradient we can quickly visualize the high and low points, and using geom_smooth we can see the trend.\r\n\r\n\r\nstart <- end - weeks(24)\r\n\r\nAAPL %>%\r\n    filter(date >= start - days(20)) %>%\r\n    ggplot(aes(x = date, y = volume)) +\r\n    geom_segment(aes(xend = date, yend = 0, color = volume)) +\r\n    geom_smooth(method = \"loess\", se = FALSE) +\r\n    labs(title = \"APPLE STOCK Bar Chart\", \r\n         subtitle = \"Charting Daily Volume, Zooming In to past 20 days\", \r\n         y = \"Volume\", x = \"\") + \r\n    coord_x_date(xlim = c(start, end)) +\r\n    scale_color_gradient(low = \"red\", high = \"darkblue\") +\r\n    theme_tq() + \r\n    theme(legend.position = \"none\")\r\n\r\n\r\n\r\n\r\n5.2.6 Moving Averages\r\nVisualizing Trends averages is important for time-series analysis of stocks. For example : A simple moving average (SMA) calculates the average of a selected range of prices, usually closing prices, by the number of periods in that range. A simple moving average is a technical indicator that can aid in determining if an asset price will continue or if it will reverse a bull or bear trend.A simple moving average can be enhanced as an exponential moving average (EMA) that is more heavily weighted on recent price action.\r\nTidyquant includes geoms to enable “rapid prototyping” to quickly visualize signals using moving averages and Bollinger bands.\r\nWithin Tidyquant the following moving averages are available:\r\n1)Simple moving averages (SMA) 2)Exponential moving averages (EMA)\r\n.. and more advanced averages : 3)Weighted moving averages (WMA) 4)Double exponential moving averages (DEMA) 5)Zero-lag exponential moving averages (ZLEMA) 6)Volume-weighted moving averages (VWMA) (also known as VWAP) 7)Elastic, volume-weighted moving averages (EVWMA) (also known as MVWAP)\r\nFor exploration : We will visualize the SMA, EMA.\r\n5.2.6.1 Charting the 14-day,50-day and 200-day Simple Moving Average\r\nCharting the 50-day and 200-day simple moving average using the SMA funciton as an example.We apply the moving average geoms after the candlestick geom to overlay the moving averages on top of the candlesticks. We add two moving average calls, one for the 50-day and the other for the 200-day. We add color = “red” and linetype = 5 to distinguish the 200-day from the 50-day.\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_candlestick(aes(open = open, high = high, low = low, close = close)) +\r\n    geom_ma(ma_fun = SMA, n = 14, color= 'green', size = 1.25) +\r\n    geom_ma(ma_fun = SMA, n = 50, color= 'blue', size = 1.25) +\r\n    geom_ma(ma_fun = SMA, n = 200, color = \"red\", size = 1.25) + \r\n    labs(title = \"AAPL Candlestick Chart\", \r\n         subtitle = \"14-Day SMA(green),50-Day SMA(blue) and 200-DaySMA (red )\", \r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(end - weeks(24), end),\r\n                 ylim = c(80, 160)) + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n5.2.6.2 Charting Exponential Moving Average (EMA)\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close)) +\r\n    geom_barchart(aes(open = open, high = high, low = low, close = close)) +\r\n    geom_ma(ma_fun = EMA, n = 50, wilder = TRUE, linetype = 5, size = 1.25) +\r\n    geom_ma(ma_fun = EMA, n = 200, wilder = TRUE, color = \"red\", size = 1.25) + \r\n    labs(title = \"AAPL Bar Chart\", \r\n         subtitle = \"50 (Blue) and 200-Day (Red) EMA \", \r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(end - weeks(24), end),\r\n                 ylim = c(80, 160)) +\r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n5.2.6.3 Charting for Reviewing Stock Volatility - Bolingar Bands\r\nWHy Bollinger Bands - Bollinger Bands are used to visualize volatility by plotting a range around a moving average typically two standard deviations up and down. Because they use a moving average, the geom_bbands function works almost identically to geom_ma. The same seven moving averages are compatible. The main difference is the addition of the standard deviation, sd, argument which is 2 by default, and the high, low and close aesthetics which are required to calculate the bands.\r\n5.2.6.3 Applying BBands using a SMA\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close, open = open,\r\n               high = high, low = low, close = close)) +\r\n    geom_candlestick() +\r\n    geom_bbands(ma_fun = SMA, sd = 2, n = 20) +\r\n    labs(title = \"AAPL Candlestick Chart\", \r\n         subtitle = \"BBands with SMA Applied\", \r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(end - weeks(24), end),\r\n                 ylim = c(80, 160)) + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\nModifying the appearance of Bollinger Bands\r\n\r\n\r\nAAPL %>%\r\n    ggplot(aes(x = date, y = close, open = open,\r\n               high = high, low = low, close = close)) +\r\n    geom_candlestick() +\r\n    geom_bbands(ma_fun = SMA, sd = 2, n = 20, \r\n                linetype = 4, size = 1, alpha = 0.2, \r\n                fill        = palette_light()[[1]], \r\n                color_bands = palette_light()[[1]], \r\n                color_ma    = palette_light()[[2]]) +\r\n    labs(title = \"AAPL Candlestick Chart\", \r\n         subtitle = \"BBands with SMA Applied, Experimenting with Formatting\", \r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(end - weeks(24), end),\r\n                 ylim = c(80, 160)) + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n6. Charting for Multiple Securities\r\nThe main fucntion here is to use facet_wrap to visualize multiple stocks at the same time. By adding a group aesthetic in the main ggplot() function and combining with a facet_wrap() function at the end of the ggplot workflow, all five “FAANG” stocks can be viewed simultaneously.\r\n6.1 Multiple securities -Closing prices\r\n\r\n\r\nstart <- end - weeks(6)\r\n\r\n\r\n\r\n\r\n\r\nFAANG %>%\r\n    filter(date >= start - days(2 * 15)) %>%\r\n    ggplot(aes(x = date, y = close, group = symbol)) +\r\n    geom_candlestick(aes(open = open, high = high, low = low, close = close)) +\r\n    labs(title = \"FAANG Candlestick Chart\", \r\n         subtitle = \"Experimenting with Mulitple Stocks\",\r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(start, end)) +\r\n    facet_wrap(~ symbol, ncol = 2, scale = \"free_y\") + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n6.2 Multiple securities -Moving averages for multiple stocks at once\r\nExperimenting with plotting multiple moving averages.\r\n\r\n\r\nstart <- end - weeks(6)\r\n\r\nFAANG %>%\r\n    filter(date >= start - days(6 * 50)) %>%\r\n    ggplot(aes(x = date, y = close, volume = volume, group = symbol)) +\r\n    geom_candlestick(aes(open = open, high = high, low = low, close = close)) +\r\n    geom_ma(ma_fun = SMA, n = 14, color= 'green', size = 0.5) +\r\n    geom_ma(ma_fun = SMA, n = 50, color= 'blue', size = 0.5) +\r\n    geom_ma(ma_fun = SMA, n = 200, color = \"red\", size = 0.5) +\r\n    labs(title = \"Multiple Securities : FAANG \", \r\n         subtitle = \"15 and 50-Day EMA, Experimenting with Multiple Stocks\", \r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(start, end)) +\r\n    facet_wrap(~ symbol, ncol = 2, scales = \"free_y\") + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\nKEY LEARNING : It doesn’t make sense to plot multiple moving average days in one combined visual.. as the lines are too close to visualize.\r\n\r\n\r\nstart <- end - weeks(6)\r\n\r\nFAANG %>%\r\n    filter(date >= start - days(2 * 15)) %>%\r\n    ggplot(aes(x = date, y = close, volume = volume, group = symbol)) +\r\n    geom_candlestick(aes(open = open, high = high, low = low, close = close)) +\r\n    geom_ma(ma_fun = SMA, n = 15, color= 'blue', size = 0.5) +\r\n    labs(title = \"Multiple Securities : FAANG \", \r\n         subtitle = \"30-Day SMA, Experimenting with Multiple Stocks\", \r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(start, end)) +\r\n    facet_wrap(~ symbol, ncol = 2, scales = \"free_y\") + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n*** KEY LEARNING *** FAANG data is filtered by date from double the number of moving-average days (2 * n) previous to the start date. This yields a nice y-axis scale and still allows us to create a moving average line using geom_ma.Too much out-of-bounds data distorts the scale of the y-axis, and too little and we cannot get a moving average. The optimal method is to include “just enough” out-of-bounds data to get the chart we want.\r\n6.3 Multiple securities -BBands for multiple stocks\r\nThis is to try out the geom_bbands and facet_wrap functions.\r\n\r\n\r\nstart <- end - weeks(24)\r\nFAANG %>%\r\n    filter(date >= start - days(2 * 20)) %>%\r\n    ggplot(aes(x = date, y = close, \r\n               open = open, high = high, low = low, close = close, \r\n               group = symbol)) +\r\n    geom_barchart() +\r\n    geom_bbands(ma_fun = SMA, sd = 2, n = 20, linetype = 5) +\r\n    labs(title = \"Multiple Securities : FAANG \", \r\n         subtitle = \"BBands with SMA Applied, Experimenting with Multiple Stocks\", \r\n         y = \"Closing Price\", x = \"\") + \r\n    coord_x_date(xlim = c(start, end)) +\r\n    facet_wrap(~ symbol, ncol = 2, scales = \"free_y\") + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n6.4 Multiple securities -Annural Returns\r\nThis is to try out the tq_transmute function.\r\n\r\n\r\nFAANG_annual_returns <- FAANG %>%\r\n    group_by(symbol) %>%\r\n    tq_transmute(select     = adjusted, \r\n                 mutate_fun = periodReturn, \r\n                 period     = \"yearly\", \r\n                 type       = \"arithmetic\")\r\n\r\n\r\n\r\n\r\n\r\nFAANG_annual_returns %>%\r\n    ggplot(aes(x = date, y = yearly.returns, fill = symbol)) +\r\n    geom_col() +\r\n    geom_hline(yintercept = 0, color = palette_light()[[1]]) +\r\n    scale_y_continuous(labels = scales::percent) +\r\n    labs(title = \"FAANG: Annual Returns\",\r\n         subtitle = \"Get annual returns quickly with tq_transmute!\",\r\n         y = \"Annual Returns\", x = \"\") + \r\n    facet_wrap(~ symbol, ncol = 2, scales = \"free_y\") +\r\n    theme_tq() + \r\n    scale_fill_tq()\r\n\r\n\r\n\r\n\r\n6.5 Portfolio Analysis using tq_portfolio function.\r\n6.5.1 Portfolio Returns\r\n\r\n\r\nstock_returns_monthly <- c(\"AAPL\", \"GOOG\", \"NFLX\",\"FB\",\"AMZN\") %>%\r\n    tq_get(get  = \"stock.prices\",\r\n           from = \"2010-01-01\",\r\n           to   = \"2015-12-31\") %>%\r\n    group_by(symbol) %>%\r\n    tq_transmute(select     = adjusted, \r\n                 mutate_fun = periodReturn, \r\n                 period     = \"monthly\", \r\n                 col_rename = \"Ra\")\r\nwts <- c(0.2, 0.2, 0.2,0.2,0.2)\r\nportfolio_returns_monthly <- stock_returns_monthly %>%\r\n    tq_portfolio(assets_col  = symbol, \r\n                 returns_col = Ra, \r\n                 weights     = wts, \r\n                 col_rename  = \"Ra\")\r\n\r\n\r\nportfolio_returns_monthly %>%\r\n    ggplot(aes(x = date, y = Ra)) +\r\n    geom_bar(stat = \"identity\", fill = palette_light()[[1]]) +\r\n    labs(title = \"Portfolio Returns\",\r\n         subtitle = \"20% AAPL, 20% GOOG,20% NFLX, 20% FB, 20% AMZN\",\r\n         caption = \"Shows an above-zero trend meaning positive returns\",\r\n         x = \"\", y = \"Monthly Returns\") +\r\n    geom_smooth(method = \"lm\") +\r\n    theme_tq() +\r\n    scale_color_tq() +\r\n    scale_y_continuous(labels = scales::percent)\r\n\r\n\r\n\r\n\r\n6.5.2 Portfolio Growth\r\n\r\n\r\nwts <- c(0.2,0.2,0.2,0.2,0.2)\r\nportfolio_growth_monthly <- stock_returns_monthly %>%\r\n    tq_portfolio(assets_col   = symbol, \r\n                 returns_col  = Ra, \r\n                 weights      = wts, \r\n                 col_rename   = \"investment.growth\",\r\n                 wealth.index = TRUE) %>%\r\n    mutate(investment.growth = investment.growth * 10000)\r\n\r\nportfolio_growth_monthly %>%\r\n    ggplot(aes(x = date, y = investment.growth)) +\r\n    geom_line(size = 2, color = palette_light()[[1]]) +\r\n    labs(title = \"Portfolio Growth\",\r\n         subtitle = \"20% AAPL, 20% GOOG,20% NFLX, 20% FB, 20% AMZN\",\r\n         caption = \"Visualize performance!\",\r\n         x = \"\", y = \"Portfolio Value\") +\r\n    geom_smooth(method = \"loess\") +\r\n    theme_tq() +\r\n    scale_color_tq() +\r\n    scale_y_continuous(labels = scales::dollar)\r\n\r\n\r\n\r\n\r\n6.5.3 Visualizing Multiple Portfolios\r\nTo visualize multiple portfolios, we just need to configure the WEIGHTs table, for the chosen number of 3 stocks.\r\n20% AAPL, 25% GOOG, 25% NFLX, 20% FB,10% AMZN 15% AAPL, 50% GOOG, 25% NFLX, 5% FB,5% AMZN 15% AAPL, 25% GOOG, 40% NFLX, 10% FB,10% AMZN\r\n\r\n\r\nweights <- c(\r\n    0.2, 0.25, 0.25,0.2,0.1,\r\n    0.15, 0.50, 0.25,0.5,0.5,\r\n    0.15, 0.25, 0.40,0.1,0.1\r\n)\r\n\r\nstocks <- c(\"AAPL\", \"GOOG\", \"NFLX\",\"FB\",\"AMZN\")\r\n\r\nweights_table <-  tibble(stocks) %>%\r\n    tq_repeat_df(n =3) %>%\r\n    bind_cols(tibble(weights)) %>%\r\n    group_by(portfolio)\r\n\r\nstock_returns_monthly_multi <- stock_returns_monthly %>%\r\n    tq_repeat_df(n = 3)\r\n\r\nportfolio_growth_monthly_multi <- stock_returns_monthly_multi %>%\r\n    tq_portfolio(assets_col   = symbol, \r\n                 returns_col  = Ra, \r\n                 weights      = weights_table, \r\n                 col_rename   = \"investment.growth\",\r\n                 wealth.index = TRUE) %>%\r\n    mutate(investment.growth = investment.growth * 10000)\r\n\r\n\r\n\r\nportfolio_growth_monthly_multi %>%\r\n    ggplot(aes(x = date, y = investment.growth, color = factor(portfolio))) +\r\n    geom_line(size = 2) +\r\n    labs(title = \"Portfolio Growth\",\r\n         subtitle = \"Comparing Multiple Portfolios- Portfolio 2 has the highest returns\",\r\n         caption = \"Best Performing Porfolio -2 : 15% AAPL, 50% GOOG, 25% NFLX, 5% FB,5% AMZN\",\r\n         x = \"\", y = \"Portfolio Value\",\r\n         color = \"Portfolio\") +\r\n    geom_smooth(method = \"loess\") +\r\n    theme_tq() +\r\n    scale_color_tq() +\r\n    scale_y_continuous(labels = scales::dollar)\r\n\r\n\r\n\r\n\r\n6.6 Miscelleneous Plotting experiementations\r\n6.6.1 GGPLOT - Exploration of Log Scale vs Continous Scale on Y for stock prices\r\n\r\n\r\nAMZN %>%\r\n    ggplot(aes(x = date, y = adjusted)) +\r\n    geom_line(color = palette_light()[[1]]) + \r\n    scale_y_continuous() +\r\n    labs(title = \"AMZN Line Chart\", \r\n         subtitle = \"Continuous Scale\", \r\n         y = \"Closing Price\", x = \"\") + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n\r\n\r\nAMZN %>%\r\n    ggplot(aes(x = date, y = adjusted)) +\r\n    geom_line(color = palette_light()[[1]]) + \r\n    scale_y_log10() +\r\n    labs(title = \"AMZN Line Chart\", \r\n         subtitle = \"Log Scale\", \r\n         y = \"Closing Price\", x = \"\") + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n6.6.2 GGPLOT - Plotting Regression trendlines with geom_smooth\r\n\r\n\r\nAMZN %>%\r\n    ggplot(aes(x = date, y = adjusted)) +\r\n    geom_line(color = palette_light()[[1]]) + \r\n    scale_y_log10() +\r\n    geom_smooth(method = \"lm\") +\r\n    labs(title = \"AMZN Line Chart\", \r\n         subtitle = \"Log Scale, Applying Linear Trendline\", \r\n         y = \"Adjusted Closing Price\", x = \"\") + \r\n    theme_tq()\r\n\r\n\r\n\r\n\r\n6.6.3 Tidyquant Themes\r\n\r\n\r\nn_mavg <- 50 # Number of periods (days) for moving average\r\nFAANG %>%\r\n    filter(date >= start - days(2 * n_mavg)) %>%\r\n    ggplot(aes(x = date, y = close, color = symbol)) +\r\n    geom_line(size = 1) +\r\n    geom_ma(n = 15, color = \"darkblue\", size = 1) + \r\n    geom_ma(n = n_mavg, color = \"red\", size = 1) +\r\n    labs(title = \"Dark Theme\",\r\n         x = \"\", y = \"Closing Price\") +\r\n    coord_x_date(xlim = c(start, end)) +\r\n    facet_wrap(~ symbol, scales = \"free_y\") +\r\n    theme_tq_dark() +\r\n    scale_color_tq(theme = \"dark\") +\r\n    scale_y_continuous(labels = scales::dollar)\r\n\r\n\r\n\r\n\r\n\r\n\r\nn_mavg <- 50 # Number of periods (days) for moving average\r\nFAANG %>%\r\n    filter(date >= start - days(2 * n_mavg)) %>%\r\n    ggplot(aes(x = date, y = close, color = symbol)) +\r\n    geom_line(size = 1) +\r\n    geom_ma(n = 15, color = \"darkblue\", size = 1) + \r\n    geom_ma(n = n_mavg, color = \"red\", size = 1) +\r\n    labs(title = \"Light Theme\",\r\n         x = \"\", y = \"Closing Price\") +\r\n    coord_x_date(xlim = c(start, end)) +\r\n    facet_wrap(~ symbol, scales = \"free_y\") +\r\n    theme_tq() +\r\n    scale_color_tq(theme = \"dark\") +\r\n    scale_y_continuous(labels = scales::dollar)\r\n\r\n\r\n\r\n\r\n\r\n\r\nn_mavg <- 50 # Number of periods (days) for moving average\r\nFAANG %>%\r\n    filter(date >= start - days(2 * n_mavg)) %>%\r\n    ggplot(aes(x = date, y = close, color = symbol)) +\r\n    geom_line(size = 1) +\r\n    geom_ma(n = 15, color = \"darkblue\", size = 1) + \r\n    geom_ma(n = n_mavg, color = \"red\", size = 1) +\r\n    labs(title = \"Light Theme\",\r\n         x = \"\", y = \"Closing Price\") +\r\n    coord_x_date(xlim = c(start, end)) +\r\n    facet_wrap(~ symbol, scales = \"free_y\") +\r\n    theme_tq_green() +\r\n    scale_color_tq(theme = \"dark\") +\r\n    scale_y_continuous(labels = scales::dollar)\r\n\r\n\r\n\r\n\r\nKey Learning : The white theme still presents the information with better clarity, and should be used for overall approach.\r\n7.0 Reflection- Conclusion/Key Learnings/Benefits of Interactivity in the Shiny App\r\nA interactive implementation of the above would be able to bring much better user experience\r\n7.1 Interactive User Experience and Self Configuration of views\r\nThe user will be able select the range date for “zooming” down into the chart rather than hard-coding as above. Example a candlestick chart is not meaningful over multi-years.\r\nThe user will be able to use a drop-down menu to select the type of charts he wish to view both for single stock or groups of stock\r\nThe example shows the group stock analysis for 5 chosen stocks, in an interactive implementation the user will be able to decide which stocks he wants to view and compare as a group.\r\nWith an interactive add the portfolio mix can also be ‘configured’ for various scenarios\r\n7.2 Finer details - Interacing with Chart Points.\r\nWith an interactive visualisation, the user is able to see more detail about the chart, by ‘hovering’ over the chart. Currently, all values have to be ‘read off’ the grid, and the user has to estimate the X and Y values based on the grid lines, instead of knowing the exact values.\r\n8.0 Possible SHiny App Story Board for Stock Analysis\r\nOrigina9.0 References\r\n1)Tidyquant Reference Manual : https://cloud.r-project.org/web/packages/tidyquant/tidyquant.pdf : 5th March 2021\r\n2)Introduction to TidyQuant https://cloud.r-project.org/web/packages/tidyquant/vignettes/TQ00-introduction-to-tidyquant.html\r\n3)R Graphics Cook Book - Winston Chong\r\n4)Workflow for : TidyQuant Portfolio Analysis https://cloud.r-project.org/web/packages/tidyquant/vignettes/TQ05-performance-analysis-with-tidyquant.html\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-04-05-assignment/assignment_files/figure-html5/unnamed-chunk-5-1.png",
    "last_modified": "2021-04-08T21:49:01+08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-03-15-dataviz3/",
    "title": "DataViz3",
    "description": "ISSS608 Visual Analytics and Applications – DataViz Makeover 3",
    "author": [
      {
        "name": "EvelynPhang",
        "url": {}
      },
      {
        "name": "",
        "url": {}
      }
    ],
    "date": "2021-03-18",
    "categories": [],
    "contents": "\r\n\r\nContents\r\n1. Link to Visualisation (Tableau)\r\n2. Original Visualisation:\r\n3. Critique\r\n3.1 Critic the Graph for Clarity and Suggestions for Improvement\r\n3.2 Critic for Aesthetics and Suggestions for Improvement\r\n3.3 Critic for Interactivity and Suggestions for Improvement\r\n4. Proposed Design Sketch\r\n5. Final Visualisation\r\n6. Top 3 Insights\r\nFirst Insight :\r\nSecond Insight:\r\nThirdInsight:\r\n\r\n7. Step by Step\r\n7.1 Step by Step : Data preparation\r\n7.2 Step by Step Chart 1: Location of Conflict Events\r\n7.3 Step by Step Chart 2: Aggregated Events : Per Country\r\n7.4 Step by Step : Chart 3 : Aggregated Events Comparison : Bar Chart\r\n7,5 Step by Step : Chart 4 : Trends of Events– over time\r\n7.6 Step by Step : Chart 5 : Trends of Fatalities– over time\r\n7.7 Adding the source of Information\r\n\r\n\r\n1. Link to Visualisation (Tableau)\r\nhttps://public.tableau.com/profile/evelynphanghuiwen#!/vizhome/EvelynPhangMITB_DataViz3/ArmedConflictLocationandEvents\r\n2. Original Visualisation:\r\nOrigina3. Critique\r\n3.1 Critic the Graph for Clarity and Suggestions for Improvement\r\nClarity Critique abd Suggestions3.2 Critic for Aesthetics and Suggestions for Improvement\r\nAesethics Critic and Suggestions3.3 Critic for Interactivity and Suggestions for Improvement\r\nInteractivity Critic and Suggestions4. Proposed Design Sketch\r\nThis a very initial paper design sketch - of the proposed 5 visualisations.\r\nInitial Paper Sketch of the proposed visualization5. Final Visualisation\r\nFinal DataViz ( I suggest that this 5 visualizations can unveil different insights).\r\nChart 1: Location of Conflict Events: objective – show how events are distributed geographicallyChart 2 : Aggregated Events Comparison- Objective : Show how different type of events ( volume ) are there in different countries or within a countryChart 3 : No. of Conflict Events : Comparison between Countries: Objective – for the same period, how countries compare on the volume of different type of eventsChart 4 : Trends of Events– over timeChart 5 : Trends of Fatalities– over timeChart 6 : Dash Board 1Chart 7 : Dash Board 26. Top 3 Insights\r\nFirst Insight :\r\nBased on chart ‘Location of conflict events’. It can be observed Philippines has a variety of events across the all islands, and also in eastern Thailand. Whereas in other parts of South East Asis eg. events are more spreadout, or occurring only in certain parts of the country eg. In Indonesia only in Central Java.\r\nFirst InsightSecond Insight:\r\nBased on the table ‘No of Conflict events – comparisons between countries’ – Philippines has the most no. of “Violence against civilians” across the complete data collection period. Mynammar has the most no. of Battles, and Indonesia has the most no. of protests, across the data collection period from 2010 to 2020.\r\nSecond InsightThirdInsight:\r\nEvaluating the bar chart “Fatalities for Events” vs ‘Armed Confliect Events”= for the same period, we can see that “Violence Against Civilians and Battles events caused the most fatalities. There was a sharp increase in both Events and Fatalities during the 5 quarters starting from 2016Q3. This is caused mainly by the events in Myanmar(for Battles) and Philippines ( for violence against civilians). On further filtering i discovered that data for Philippines was only available from 2016 - so that is also one of the reasons for the sudden jump.\r\nThird Insight7. Step by Step\r\n(Provide step-by-step description on how the data visualization was prepared)\r\n7.1 Step by Step : Data preparation\r\n7.1.1 Import the data : which is an excel\r\n\r\n\r\n\r\n7.1.2 Create parameter Start Date and End Date, implement it as a slider with restricted range ( based on what we see is in the raw data ). \r\n7.1.3 Create the Calculated Field Duration using the newly created parameters:\r\n\r\n\r\n\r\n7.2 Step by Step Chart 1: Location of Conflict Events\r\n7.2.1 In Worksheet 1 of the Tableau work -Populate the following columns , rows, filters my dragging the parameters from the side bar into : Columns, Rows, Filters, Marks( use circle), Details ( see below ), Tool Tips.\r\n\r\n\r\n\r\nThe implementation : allow for Event Date,Notes,Fatalities,Country,Location to be part of informative tool tip.\r\n7.2.2 Configure the filters to show filter: Country ,Event Type, Duration ( from the Filters Panel). Configure the colours to show filter : Event Type ( from the Marks panel ). For Duration, configure as slider. For Event Type/Country- configure as dropdown checkpoint list, multiple.Rename the title of the filters – so that they are linked back meaningfully to the chart. Unhide the ‘Legend’ in the filter.\r\n\r\n\r\n\r\n7.2.3 Rename the title to include the start and end dates parameters.\r\n\r\n7.2.4 Implement a more complete tooltip with added fields such as Event Type,Date,City,Country,Fatalities,Notes\r\n\r\n\r\n\r\n7.2.5 Completed Chart 1\r\n\r\n\r\n\r\n7.2.6 Rename the Sheet 1 as :Armed Conflict Location and Events\r\n7.3 Step by Step Chart 2: Aggregated Events : Per Country\r\n7.3.1 Populate the second tableau worksheet with the following columns , rows, filters my dragging the parameters from the side bar into : Columns, Rows, Filters, Marks( use circle), Details ( see below ), Tool Tips.\r\n\r\n\r\n\r\n7.3.2 Formatting : ForColour,configure the markers to have opacity 60% and , border of black. For Size, configure the size of the Circle Marker.\r\n\r\n7.3.3 For Count – ensure that use count at both Country and Event Type level. Configure : Count(Sheet1) as follows:\r\n\r\n\r\n\r\n7.3.4 Configure the Filter Panel to have all the following filters to ‘Show Filter’ and also rename the titles something meaningful. Configure the Title to dynamically show the StartDate and EndDate. \r\n7.3.5 Configure the Label to show the actual events count \r\n7.3.6 Implement a pie-chart worksheet for the tooltip. This piechart allows the user to see for each country what is the percentage of event type, compared to the total events.\r\n\r\n\r\n\r\n7.3.7 Implement the tooltip as follows\r\n\r\n\r\n\r\n\r\n\r\n\r\n7.3.8 Rename the Sheet to Aggregated Events : By Country. THe Completed Final visualisation. \r\n7.4 Step by Step : Chart 3 : Aggregated Events Comparison : Bar Chart\r\n7.4.1 Populate the third tableau worksheet. Populate the following columns , rows, filters my dragging the parameters from the side bar into : Columns, Rows, Filters, Markers,Colours\r\n\r\n\r\n\r\n7.4.2 Rename the secondary axis labelling for the y-axis to “Event Count” from “Count of Sheet1”.\r\n\r\n\r\n\r\n7.4.3 Format the Chart. Configure Grid lines – from the top bar, select ‘Format’, ‘Gridlines’, Subtab Rows-select mid grey.Repate for Sub-tab Column.\r\n\r\n\r\n\r\n7.4.4 Format the Chart. Format the panel column in the chart so that all the quarters of the same year, have the ‘same colour’ by choosing a shading colour and adjust the “band size” to the right level.\r\n\r\n\r\n\r\n7.4.5 Turn on the mark label – so that the counts can be seen immediately.\r\n\r\n\r\n\r\n7.4.6 Format the tooltip as follows:\r\n\r\n\r\n\r\n7.4.7 Edit the title to dynamically reflect the startdate and enddate parameters\r\n\r\n\r\n\r\n7.4.8 Completed Visualisation as follows:\r\n\r\n7,5 Step by Step : Chart 4 : Trends of Events– over time\r\n7.5.1 Populate the third tableau worksheet with the following columns ( Event Type ), rows (CNT(Sheet1), filters by dragging the parameters from the side bar into : Columns, Rows, Filters, Markers,Tooltips.\r\n\r\n\r\n\r\n7.5.2 Edit the “Table Calculation” for CNT(Sheet1) in Rows as follows with Compute using “cell”.\r\n\r\n\r\n\r\n7.5.3 Implement the following – Tooltip\r\n\r\n7.5.4 Format the Chart : Gridlines and Panel colouring so that all the quarters for the same year will have the same panel colour and some light grey row and column grid lines.\r\n\r\n\r\n\r\n7.5.5 Format the title to include dynamic – start and end date as well as event types\r\n\r\n\r\n\r\n7.5.6 Rename the y-axis to “Event Count”.\r\n\r\n\r\n\r\n7.5.7 Configure the filter panel to turn on the filters for Event Type, Country, and the Legend, as well as the StartDate and EndDate – calculated field. Rename the filter appropriately.\r\n\r\n\r\n\r\n7.5.8 Rename the worksheet as Event Count. Final Visualisation as follows.\r\n\r\n7.6 Step by Step : Chart 5 : Trends of Fatalities– over time\r\n7.6.1 Populate the fifth tableau worksheet with the following columns filters by dragging the parameters from the side bar into : Columns, Rows, Filters, Markers,Tooltips.\r\n\r\n\r\n\r\n7.6.2 Configure the Sum(Fatalities) count as follows\r\n\r\n\r\n\r\n7.6.3 Implement the tooltip as follows\r\n\r\n7.6.4 Configure the readability of the chart – by adding gridlines ( light grey) for both rows and columns. And adding colour the panel to have all quarters in the same year as same colour.\r\n\r\n\r\n\r\n7.6.5 Customised the Title of the chart to dynamically reflect the Event type, and also the Countries and StartDate/EndDate from the filters.\r\n\r\n7.6.6 Format the Y-axis of the chart with title “Fatalities Count”\r\n\r\n\r\n\r\n7.6.7 Configure the Filter Panel to include the filters for Country, Event type, StartDate, EndDate and Legend. Edit the filter “title” and legend title accordingly.\r\n\r\n\r\n\r\n7.6.8 Rename the chart as “Fatalities Count”. Final Visualisation as follows.\r\n\r\n7.7 Adding the source of Information\r\nAdd the source of data to both dashboards in the righhand bottom footer. Here I show just one example.\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-03-15-dataviz3/data3/Step0.jpg",
    "last_modified": "2021-03-18T15:40:26+08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-01-27-dataviz1/",
    "title": "DataViz1",
    "description": "ISSS608 Visual Analytics and Applications – DataViz Makeover 1",
    "author": [
      {
        "name": "EvelynPhang",
        "url": {}
      },
      {
        "name": "",
        "url": {}
      }
    ],
    "date": "2021-02-22",
    "categories": [],
    "contents": "\r\n1. Link to Visualisation (Tableau)\r\nhttps://public.tableau.com/profile/evelynphanghuiwen#!/vizhome/DataViz1_16117030016390/AgeGroupDistribution?publish=yes\r\n2. Original Visualisation:\r\n[Original]\r\n3a.Critic the Graph for Clarity and Aesthetics.\r\n3b. Suggestions for Improvement\r\nCritique3c. Using Tableau, design the proposed data visualization\r\nStep03d. Provide step-by-step description on how the data visualization was prepared\r\n3d.1 Data Exploration\r\nData Exploration – identifying the correct data source for the objective\r\nTableau is effective when using data that is structured. Each row is an item of data, and each column is an attribute.\r\nObjective: To achieve the purpose to show composition of different residents age-group – as part of total resident workforce.\r\nReviewing relevant table: Based on the diagram and looking in the report, if was realised that the data used for the chart is actually a calculated field from the data columns in Table 7 instead of Table 5 in the assignment reference.\r\nDownload Table 7 from the report, and delete the extra tabs for Male and Female as this into used in the analysis.\r\nMOM Data Table 7 :https://stats.mom.gov.sg/Pages/Labour-Force-Tables2019.aspx\r\n3d.2 Create the new data required from the existing worksheet.\r\nEvaluate the Table 7 to find out how to compute the % contribution to the workforce for that age group.\r\nTable71)Add a new worksheet ‘calculated’ - that computes the % contribution to the workforce for each group, using the data from T7_T tab in the excel.\r\n2)Each of the field above is computed based on the relevant fields Eg. For 2009, the Age Group contribution for 15-19 is [Age-Group[15-19]-workforce-for-the-year]/[Total-workforce-for-the-year]= 31.8/1985.7 = 1.6%.\r\n3)The “calculated” provides the required data for the chart: ( leveraging Excel or Tableau Prep).\r\ncalculated3d.3 Implement a Bar Chart Visualisation for the calculated Sheet\r\n For the 2009 chart, change the x-axis to have a reversed scale. \r\n3d.4 Update the Marks of the colour 2009/2019 % -using the gradient color selection\r\nUse the 2009 and 2019 data, input to the ‘colours’ tab for both columns – 2009 and 2019.\r\nFor both the colour ranges for 2009/2019, configure the i)6 color steps ii)select color gradient Red-Gold iii)Configure the same Start and End ( 0, 15 ).\r\ndashboard3d.5 Adding and Fine Tuning Labelling, Captions,Font,Font Size\r\ndashboard3d.6 Dashboard and Annotation to help the users capture the information\r\ndashboardCreate a Dashboard – and add an annotation for the key observation that the % contribution for Age Group to the workforce, has increased for Age Group >50 years old. To make the years clearer, add a pane background to show the distinction between Year 2009 and Year 2019.\r\n4. Final DataViz and Top Three insights from DataViz\r\nMain Objective: My DataViz wants to communicate the composition of workforce base on age-group % of the workforce showing the change over the 10 years from 2009 to 2019 as the key objective. (Other info such as male vs female, change in absolute size of workforce is also interesting but is not addressed within this assignment).\r\n1st Insight : Between 2009 and 2019, the distribution of % of workforce remained largely the same with the age groups 35-49 contributing the largest percentages. [ Judging from the three longest bars of the chart for both June 2009 and June 2019].\r\nHighlight12nd Insight: There is a significant increase in the percentage contributed by the age group from 55 and beyond. [ Judging from clearly longer bars, and significant change in color on the right side of the chart ].\r\n3rd Insight: The is a slight decrease in the percentage of increase contributed by the age group from 55 and below. [ Judging from clearly longer bars, and significant change in colour on the right side of the chart ].\r\nHighlight3\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-02-22T19:28:03+08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-02-19-dataviz2/",
    "title": "DataViz2",
    "description": "ISSS608 Visual Analytics and Applications – DataViz Makeover 2",
    "author": [
      {
        "name": "EvelynPhang",
        "url": {}
      },
      {
        "name": "",
        "url": {}
      }
    ],
    "date": "2021-02-19",
    "categories": [],
    "contents": "\r\n1. Link to Visualisation (Tableau)\r\nhttps://public.tableau.com/profile/evelynphanghuiwen#!/vizhome/DataViz2EvelynPhang_16136603094040/DivergentVAC1?publish=yes\r\n2. Original Visualisation:\r\nOriginal3a.Critic the Graph for Clarity and Aesthetics.\r\n3b. Suggestions for Improvement\r\nCritique-clarityCritique-aesthetics3c.1 Sketch Out the Proposed Design\r\nStep0Chart 1 : Choice of Chart :Divergent Stack Bar\r\nThis is the best choice for communicating survey results that was in in the form of a Likert scale [ (Likert 1932), which consists of a discrete number of choices per question among the sequence: “Strongly Disagree”, “Disagree”, “No Opinion”, “Agree”, “Strongly Agree”].In a Likert Scale that has 5 options, the positive responses will include the top 2 options – Strongly Agree and Agree.\r\nAdditional Filter for Demographics: To allow the user to select view of this data based on certain social-demographics, we should implement a selectable filer ( Multiple Selection Dropdown List) for the user to select.\r\nChart 2: Attitudes in Vaccination : Divergent Stack Bar\r\nThe data source provided additional survey questions, that provider deeper insights of possible reasons why people may accept or not accept the vaccine. I will leverage 4 of this survey from the same source : but from the survey tables vac2_1,2_2,2_3,2_6 – to create the Likert scale response in the form of a Divergent Stack Bar – that will also be used as a TOOLTIP of Chart 1. Same Filters must apply for demographics ( also when presented in the Tooltip ).\r\nChart 3 : Agree/Strongly Agree – Bar Chart\r\nI will implement a bar chart for the two Scores – Agree/StronglyAgree instead of just a bar chart for “Strongly Agree”. In a Likert Scale survey, the top 2 choices are both as indicative of positive choices.\r\nChart 4 : Agree/Strongly Agree – Error Bar/Confidence Bar – to address uncertainty\r\nThis chart is used to illustrate the fact that depending on the quality of the samples and the number of samples taken, the data presented by the charts – may not have a high confidence of certainty. To illustrate this, I will plot the Agree/Strongly Agree – confidence scores for both 95% and 99% in the same chart to illustrate the part.\r\n3c.2 Using Tableau, design the proposed data visualization\r\n3d. Provide step-by-step description on how the data visualization was prepared\r\n3d.1 Data Exploration and Data Cleansing\r\nData Exploration – identifying the correct data source for the objective.Tableau is effective when using data that is structured. Each row is an item of data, and each column is an attribute. For the purpose of this assignment, I stick with the 15 countries analysed in the original visualiation:Australia,Canada,Denmark,Finland,France,Germany,Italy,Japan,Netherlands,Norway,Singapore,South-Korea,Sweden,United Kingdom.\r\nData Prep Step 1 :\r\nImport the data and create the new data required from the existing country worksheets.\r\nCreate a new Union – of all the excel of the 15 countries. Except for the columns in the right panel, hide all other columns\r\nDataPrepStep1Export the filtered columns into a new excel AllCountries00.xls and start a new Tableau Project.\r\nData Prep Step 2 :Import the file from the previous steps and continue data prep.\r\n1)TableName – split this attribute, to create a new column that is renamed  . The reason for doing this is to extract just the word  from the table name .xls\r\n2)Rename some attributes Rename the attribute Household Size to “Size of Household” Rename the attribute “Household Children” to “Children in household”\r\n3)Create numerical version of the survey response using this logic. Apply this to all survey response, VAC_1, VAC_2, VAC_3, VAC2_1, VAC2_2, VAC2_3, VAC_\r\n Do this to create new numeric fields from the original character fields: VAC_1_num, VAC_2_num, VAC_3_num, VAC2_1_num, VAC2_2_num, VAC2_3_num, VAC_6_num. 4)Hide the original string based VAC data. VAC_1, VAC_2, VAC_3, VAC2_1, VAC2_2, VAC2_3, VAC_6. 5)Pivot on the new fields: VAC_1_num, VAC_2_num, VAC_3_num, VAC2_1_num, VAC2_2_num, VAC2_3_num, VAC_6_num.\r\nData Prep Step 3 : Select all VAC columns for pivot\r\nDataPrepStep4Rename the Pivoted columns as : “Survey” and “Score”, and change the data type for score to ‘integer whole’.\r\nData Prep Step 4 : Build the needed Calculated Fields\r\nCalculatedFields1Data Prep Step 5 : Create Some Meaningful Aliases\r\nFor all the scores create the value alias \r\nFor the sub-surveys create the survey alias  For the countries , as these are names ( proper nouns) , create alias with the Country names – starting with capital letters.\r\nDataPrepStep53d.2 Building the required Charts\r\nBuilding Chart 1 : Survey output of VAC1_Num \r\nKey Steps :\r\n1)Adding Gantt Percent to the Columns – select compute using score 2)Adding ‘Countries’ to the Row – select sort by ‘Count Agree’ 3)Add Survey to the Filter (Edit Filter- and select VAC1num) 4)Add Score to the Filter (Edit Filter- Select all except Null ) 5)Add Gender to the Filter (Edit Filter - Select ‘Male’ and ‘Female’ ) 6) Add Size of Household to the Filter– select all 8) Add Children of Household to the Filter– select all 9) Add Employment Status to the Filter– select all 10) Add Age to the Filter – ensure that it is a ‘continuous’ dimension. 11) In Marks – select “Gantt Bar”\r\n 12)Format the X-axis – Scale- Numbers : Percentage with 0 decimal space\r\n13)Configure the colours of the Divergent Chart – using two shades of the same colour for positives (Strongly Agree,Agree ) and two shades of the another colour for negatives ( Strongly Disagree, Disagree ) and lighter colour for neutral.\r\n 13)Add a reference line at 0% for the X-axis, Value =0 and Constant, with Label=Custom, 0%\r\n 14)Configure all Filters to “Show Filter”.As they showup on the right panel , configure them as “Multiple Value” Dropdown, except for the AGE filter, which is a continuous range slider.\r\n15)Implement formatting to the chart:\r\nSelect on the Menu bar, Format, Workbooktheme, Modern\r\nSelect on the Menu bar, Format, Lines, Gridlines, select to middle grey.\r\nChange the title to : Respond to Survey Question : \" If a Covid-19 vaccine were made available to me this week, I would definitely get it\"\r\n16)Turn on animation.\r\nChart1_617)Rename the first chart as “Divergent VAC1”.\r\nBuilding Chart 2 : Attitudes of Vaccination \r\nKey Steps;\r\n1)Implement a new chart called “Attitudes of Vaccination” -using the data from the survey question VAC2_1,VAC2_2,VAC2_3,VAC2_6. To do this, first duplicate the first chart “Divergent VAC1”. For this second chart rename it “All attitudes”.\r\n2)Based on the duplicated and renamed chart, -Move the “Country” pill back into the shelf. -Move the “Survey” pill from the shelf into row\r\n3)Edit the Filter for the ‘Survey’ pill in the Filter Shelf to show only the four – sub attitudes. 5)Rename the title of this second chart to : Attitudes Towards Vaccination by All\r\n\r\nUpdating Chart 1 : Adding the Tooltip \r\n18)Go back to the First Chart, and implement the following Tooltip.\r\n The resulting outcome is as follows :\r\nChart1_9Building Chart 3 : Agree/StronglyAgree Error/Confidence Bars \r\nDuplicate the Sheet “Divergent VAC1”. Rename the new sheet as “Agree/Strongly Agree Error Bars”.\r\nStep 1 : Implement the following new ‘Calculated’ fields to achieve the Error bar chart.\r\nCalculated FieldsStep 2 : Repopulate the “Columns” with Measure Values, and then Prop In the “Filter” Shelf, Edit the Filter for Measure Values to show only : Prop_Lower Limit 95% Prop_Upper Limit 95% Prop_Lower Limit 99% Prop_Upper Limit 99%\r\nChart1_9Step 3 : In the MARKS card, for “Measure Values” , select type “Line” and add Measure Values into ‘Colour’,’Size’,’Path’,’Detail’\r\nStep 4 : In the MARKS card, configure “AGG(PROP)” to be type “Circle” and add ‘Measure Names’ into detail, and (CNT)Number of Records into the Tooltip\r\nChart1_9Step 5 : Updating the MARKS Card\r\nIn the MARKS card, for “Measure Values”, configure “Tooltip” as follows : Country: : \r\nIn the MARKS card, for “AGG(PROP)”, configure “Tooltip” as follows : Measure Names:  Country:  Prop: <AGG(Prop)> Number of Records : <CNT(Number of Records)>\r\nAdjust the Colours as follows in the “MARK” tray and set Opacity to “50%”. \r\nStep 6 : Drop the ‘PROP’ from column, into the chart again as a second X-Axis “at the top”. Synchronize the Axis.\r\n Step 7 : Configure the right panel to show only the Filters for : “Survey” and “MeasureValues” so that we can configure which survey the chart is displaying, and also Confidence upper bound and lower bounds we want to view.\r\n Rename the title of this chart – shows that it ‘dynamically’ reflects the results for the appropriate survey.\r\nStep 8 : Rename the title of this chart – shows that it ‘dynamically’ reflects the results for the appropriate survey.\r\nBuilding Chart 5 : Agree/StronglyAgree Error/Confidence Bars \r\nDuplicate the “Divergent VAC1” sheet , and rename it as Agree/Strongly Agree Bar Chart.\r\nRemove everything in Column and populate with “Strongly Agree” Measure Value, Format this as “Percentage” with 2 decimal places. Remove everything in Row and populate with “Country”. In Marks, remove everything, and then Add “Score” into colour. In Marks, change the chart type to “Bar”.\r\nImplement the following tool tip: \r\nResult implementation is as below: \r\nRename the title of this chart – shows that it ‘dynamically’ reflects the results for the appropriate survey. \r\nAs a last step, add the source references to all Charts. Source : Imperial College London YouGov Covid 19 Behaviour Tracker Data Hub https://github.com/YouGov-Data/covid-19-tracker\r\n4. Final DataViz and Top Three insights from DataViz\r\n4.1 Main Objective\r\nMy DataViz wants to communicate the attitudes towards taking Covid19 vaccination- based on the ( Source : Source : Imperial College London YouGov Covid 19 Behaviour Tracker Data Hub ) to highlight 1) Differences in attitudes between Countries 2) Differences in attitudes between now and 1 year from now 3) Highlight how the data source is reliable or show the confidence level of the data\r\n4.2 Final DataViz\r\nChart 1 : Divergent Bar Chart of Survey Response : Getting the Vaccine Available Now\r\n Chart 2 Divergent Bar Chart of Survey Response : Getting the Vaccine Available Now with Tool Tip\r\nChart2Chart 3: Divergent Bar Chart of Survey Response : Getting the Vaccine Available One Year from Now with Tool Tip\r\n Chart 4 : Divergent Bart Chart on Attitudes on Vaccination\r\n Chart 5: Agree/Strongly Agree – Error Bars - 95%/99% confidence\r\n Chart 6: Agree/Strongly Agree – Bar Charts\r\nChart64.3 Key Insights\r\n1st Insight :Asian Countries were in general less receptive to the vaccine and attitudes about taking the vaccine one year from today did not change much\r\nInsigh1UK has the highest number of people who are willing to take the vaccination as soon as possible, and in deeper dive we can see that they have strong confident in the health authorities( > 60%), and at the same time low fear of side effects ( < 50% ). All the Asian countries had low willingness to take the vaccination. When I further compared this with the attitude one year from now, there was no significant change in willingness to accept the vaccine.\r\nInsigh1aTHe opinion about willingness to accept the Vaccine did not change significantly if it was offered to be available one year later instead of in 1 week’s time.\r\n2nd Insight:People’s Willingness to accept vaccine, can be explained by their fear/worry about the Vaccine/Covid-19\r\nInsight1The countries that were most worried about the side effects of the vaccine, and are worried about getting Covid19- are the two North Asia Countries Japan and South Korea. Not surprisingly people in the UK and Denmark are the least worried, and are thus also in the top 5 countries most willing to accept the vaccine.\r\n3rd Insight:From the same data sources,data from different ranges may have different certainty/confidence \r\nAs the oldest people are the most vulnerable, it is important for most governments that they are vaccinated first. Based on Chart 1, across all countries, for the age group from 70 and beyond, compared to the general population a significant percentage of people who are prepared to accept the vaccine.\r\n From the chart above, across all countries – Top 5 countries have positive responses in the range of 50% to 70%- when considering participants from all age group\r\nInsight3From the next chart above, across all countries – Top 5 countries have positive responses in the range of 70% to 85% when considering participants from age group between 70 to 99.\r\nBut….is this really the truth ?\r\nBy looking at the Error Bar/Confidence chat, we discover that the confidence interval for this ‘older age group range’ is actually much lower compared to the original data. Take for eg Singapore at 95% confidence, the percentage of people who indicated agree/strongly-agree ranged from 26% to 44% - for those in the age group 70 to 99 compared to 32% to 35% if considering all ages. See the two charts below.\r\n\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-02-19T05:46:56+08:00",
    "input_file": {}
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Evelyn Phang's Blog for IS 608 MITB SMU course",
    "description": {},
    "author": [
      {
        "name": "Evelyn Phang",
        "url": "https://example.com/norajones"
      }
    ],
    "date": "2021-01-27",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-04-05T12:20:48+08:00",
    "input_file": {}
  }
]
